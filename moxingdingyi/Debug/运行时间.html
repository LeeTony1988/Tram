<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <!-- 引入 ECharts 文件 -->
    <script src=".\echarts.min.js"></script>
</head>
<body>
    <div id="main" style="width: 520px;height:360px;"></div>
    <script type="text/javascript">
		window.proposalsnum=new Array();
		window.source_temp=[];
		window.source_result=new Array();
		window.serie=new Array();
		function GetProposalnum(proposalnum)
		{
			window.proposalsnum.push(proposalnum);
		}
		function SetSource(sourcedata)
		{
			window.source_temp.push(sourcedata);
		}
		function SetSource_Result()
		{
			window.source_result.push(window.source_temp);
			window.source_temp=[];
		}
		function ClearAll()
		{
			window.proposalsnum=[];
			window.source_temp=[];
			window.source_result=[];
			window.serie=[];
			InitChart();
		}
		function serie_func()
		{
			window.serie=[];
			for(var i=0;i<window.source_result.length;i++)
			{
				var item={
					name:'区间'+(i+1),
					type:'bar',
					stack:'总量',
					label:{
						normal:{
							show:true,
							position:'insideRight'
						}
					},
					data:window.source_result[i]
				}
				serie.push(item);
			}
			//alert(serie.length);
			//return serie;
		}
		function SetRegionNum()
		{
			var regionsnum=new Array();
			for(var i=0;i<window.source_result.length;i++)
			{
				regionsnum[i]='区间'+(i+1);
			}
			return regionsnum;
		}
        // 基于准备好的dom，初始化echarts实例
		function InitChart()
        {
			var myChart = echarts.init(document.getElementById('main'));
			myChart.clear();
			// 指定图表的配置项和数据
			option = {
				tooltip : {
					trigger: 'axis',
					axisPointer : {            // 坐标轴指示器，坐标轴触发有效
					type : 'shadow'        // 默认为直线，可选为：'line' | 'shadow'
					}
				},
				legend: {
					data: SetRegionNum()
				},
				grid: {
					left: '3%',
					right: '4%',
					bottom: '3%',
					containLabel: true
				},
				xAxis:  {
					name:'运行时间(min)',
					nameLocation:'center',
					nameGap:20,
					type: 'value',
					nameTextStyle:{
						fontSize:12,
						fontWeight:'bold'
					}
				},
				yAxis: {
					type: 'category',
					data: window.proposalsnum
				},
				series: serie
			};
        // 使用刚指定的配置项和数据显示图表。
        myChart.setOption(option);
		}

    </script>
</body>
</html>
